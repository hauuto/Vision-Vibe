<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo: TailwindCSS, RevealJS, Flask, OpenCV</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- TailwindCSS CDN -->
    <link href="../static/css/tailwind.min.css" rel="stylesheet">
    <!-- RevealJS -->
    <link rel="stylesheet" href="../static/reveal/reveal.css">
    <link rel="stylesheet" href="../static/reveal/theme/white.css">
</head>
<body class="bg-gray-50">

    <!-- Header -->
    <header class="bg-purple-700 text-white p-6 mb-8 shadow">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between">
            <h1 class="text-3xl font-bold mb-2 md:mb-0">Demo: TailwindCSS, RevealJS, Flask, OpenCV</h1>
            <nav>
                <a href="/" class="text-white hover:underline mx-2">Home</a>
                <a href="/essay_1" class="text-white hover:underline mx-2">Essay 1</a>
            </nav>
        </div>
    </header>

    <!-- RevealJS Slideshow -->
    <section class="container mx-auto mb-12">
        <div class="reveal" id="reveal-demo">
            <div class="slides">
                <section>
                    <h2 class="text-purple-700">TailwindCSS</h2>
                    <p class="text-lg">Utility-first CSS framework for rapid UI development.</p>
                    <button class="bg-purple-600 text-white px-4 py-2 rounded mt-4 hover:bg-purple-800">Tailwind Button</button>
                </section>
                <section>
                    <h2 class="text-blue-600">RevealJS</h2>
                    <p class="text-lg">Framework for easily creating beautiful presentations using HTML.</p>
                    <ul class="list-disc ml-8 text-left">
                        <li>Markdown support</li>
                        <li>Code highlighting</li>
                        <li>Slide transitions</li>
                    </ul>
                </section>
                <section>
                    <h2 class="text-green-600">Python Flask</h2>
                    <p class="text-lg">A lightweight WSGI web application framework.</p>
                    <button id="flask-api-btn" class="bg-green-600 text-white px-4 py-2 rounded mt-4 hover:bg-green-800">Call Flask API</button>
                    <div id="flask-api-result" class="mt-4 text-gray-700"></div>
                </section>
                <section>
                    <h2 class="text-pink-600">Python OpenCV</h2>
                    <p class="text-lg">Open Source Computer Vision Library for real-time image processing.</p>
                    <form id="opencv-form" class="mt-4 flex flex-col items-start" enctype="multipart/form-data">
                        <input type="file" name="image" accept="image/*" class="mb-2 border p-2 rounded" required>
                        <button type="submit" class="bg-pink-600 text-white px-4 py-2 rounded hover:bg-pink-800">Upload & Process</button>
                    </form>
                    <div id="opencv-result" class="mt-4"></div>
                </section>
            </div>
        </div>
    </section>

    <!-- RevealJS & JS logic -->
    <script src="../static/reveal/reveal.js"></script>
    <script>
        Reveal.initialize();
    </script>

    <!-- Flask API Demo JS -->
    <script>
        document.getElementById('flask-api-btn').onclick = function() {
            fetch('/api/hello')
                .then(res => res.json())
                .then(data => {
                    document.getElementById('flask-api-result').innerText = data.message;
                })
                .catch(() => {
                    document.getElementById('flask-api-result').innerText = 'API call failed.';
                });
        };
    </script>

    <!-- OpenCV Demo JS -->
    <script>
        document.getElementById('opencv-form').onsubmit = async function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            document.getElementById('opencv-result').innerHTML = 'Processing...';
            const res = await fetch('/api/opencv-demo', {
                method: 'POST',
                body: formData
            });
            if (res.ok) {
                const data = await res.json();
                document.getElementById('opencv-result').innerHTML =
                    `<img src="data:image/png;base64,${data.image}" class="mt-2 border rounded shadow" alt="Processed Image" style="max-width: 400px;">`;
            } else {
                document.getElementById('opencv-result').innerText = 'OpenCV processing failed.';
            }
        };
    </script>
</body>
</html>